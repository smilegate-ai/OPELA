# OPELA 

> OPELA [O:pæ:la] 는 **O**pen-domain conversations by **P**ersonas with **E**mpathy, **L**ong-term memory, and **A**ttractive personality.
>이 데이터는 두 역할을 play 하는 대화입니다. 한 사람은 가상의 캐릭터 (또는 "concept")을 가진 페르소나 역할을, 다른 한 사람은 현실에서 마주칠만한 일반적인 사람 역할을 합니다 (이후부터는 편의를 위해 메신저 플랫폼을 이용하는 '사용자'로 호칭합니다). 
이는 챗봇과 상호작용하는 상황을 가정하고 이후에 학습할 수 있도록 공감하고 재밌게 반응해주는 챗봇(페르소나)과 사람(사용자)의 관계와 비슷합니다. 두 사람의 대화는 다양한 일상적인 주제에 대해 짧게는 15 turn부터 길게는 80 turn까지 있습니다. 

## 본 데이터는 스마일게이트 AI와 서울대학교가 공동 협업으로 진행한 프로젝트입니다.

# 참여연구원

- [이윤경](https://yoonkyunglee.com)<sup>1</sup>, [조원익](https://sites.google.com/site/warnikchow)<sup>2</sup>,배서연<sup>1</sup>, 김지환<sup>2</sup>, 박지상<sup>1</sup>, 김남수<sup>2</sup>, 한소원<sup>1</sup>, 
- 최현우<sup>3</sup>, 황준선<sup>3</sup>, 김무성<sup>3</sup>

<sup>1</sup>[Human Factors Psychology Lab](https://hfpsych.snu.ac.kr/), Department of Psychology, Seoul National University <br>
<sup>2</sup>[Human Interface Lab](https://hi.snu.ac.kr/), Department of Electrical and Computer Engineering, Seoul National University <br>
<sup>3</sup>[Smilegate AI](https://smilegate.ai/)



### 데이터 구축 목적
***
영어 및 중국어 등에서 페르소나를 활용한 대화 데이터들이 제시되었으나, 주로 어떤 상황에서 몇 가지의 조건 정도로 페르소나를 정하는 경우가 많았습니다. 우리는 마치 게임의 NPC가 그러하듯 어떤 `컨셉'을 잡은 페르소나가 있을 때, 불특정 다수의 일반인이 해당 페르소나와 대화를 나눈다면 어떤 양식으로 대화가 진행되고, 어떤 페르소나에게 사람들이 매력을 느끼는지 알아보고자 본 데이터를 구축했습니다. 

#### 페르소나 참여자와 일반 참여자 간의 대화를 통한 데이터 구축
* 소수의 정해진 컨셉의 페르소나 참여자와 불특정 다수인 일반 참여자 간의 대화로 진행
  - 페르소나 참여자와 일반 참여자를 위한 가이드라인을 별도로 구축하여, 교육 및 테스트 후 대화 진행
  - 다양한 언어들의 번역으로 구성된 기존의 한국어 포함 페르소나 대화 데이터와 달리, 한국어를 위하여 구성된 가이드라인을 통해 구축
  - 대화 데이터 구축 과정에서 페르소나와 사용자가 서로와의 대화를 평가한 ground truth 설문 데이터를 확보

* 구축된 대화 데이터를 제3자가 읽으면서 자기개방, 공감 등의 요소를 문장 별로 태깅함으로써 추가적인 분석 데이터 확보
  - 본 대화 데이터를 학습에 활용함으로써, 특정 페르소나가 나눌 만한 대화를 미리 추론해볼 수 있음
  - 본 대화 데이터의 태그를 학습에 활용함으로써, 대화를 특정한 방향으로 이끌어가도록 지도학습을 시행할 수 있음
  - 본 대화 데이터를 분석함으로써 사람과 봇의 대화 뿐 아니라 사람과 사람의 대화에서도 어떤 요소가 서로에 대한 생각에 긍정적, 혹은 부정적인 영향을 미치는지 분석할 수 있음


### 데이터 구축 방식
***
본 데이터셋의 대화는 스마일게이트 AI센터와 서울대학교가 공동으로 개발한 페르소나-사용자 대화 가이드라인을 활용하여, 크라우드소싱 업체 딥내츄럴의 작업자 풀에서 모집된 페르소나 측과 사용자 측의 대화 참여자를 교육한 후 구축되었습니다. 

<img src="https://deepnatural.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F320cf5a7-583c-45f3-b7c1-770e99d99fdf%2F%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%87%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A5_%E1%84%8C%E1%85%A1%E1%84%8B%E1%85%B2%E1%84%83%E1%85%A2%E1%84%92%E1%85%AA_%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A6%E1%86%A8%E1%84%90%E1%85%B3A2(01).png?table=block&id=b2b8a23d-7667-422c-89d5-9887d1e0c53b&spaceId=04a9e1fc-cc2a-4e1c-8b27-dd1dc75a88f9&width=2000&userId=&cache=v2" width="500"/>

* 페르소나 참여자 모집
    - 페르소나 설정 방식에 대한 공고
    - 연구 진행자 및 프로젝트 매니저의 페르소나 면접 (대화 및 대화 평가)
    - 최대한 다양한 프로필의 페르소나 참여자 모집
        - 예시: 꼬마도넛
            - 파워집순이이자 영화, 드라마(특히 가족시트콤)를 좋아하고 음악 듣기(특히 아리아나 그란데)를 좋아하는, 이름만 꼬마 도넛인 사람
        - 예시: 배고픈 잠보
            -  퇴마록부터 전지적 독자시점까지 근 30년 꾸준히 읽어온 판타지소설 매니아. 만화, 웹툰, 영화, 음악, 공연 즐길 수 있는 건 모두 호, 장르 안가리는 잡식성. 올빼미과라 아침 일찍 해야하는 일은 불호. 한여름에도 뜨아파, 더운 날에도 엉뜨는 켜야함. 먹는 거 주는 사람은 무조건 착한 사람으로 생각함. 가끔 겉잡을 수 없이 우울모드일 때가 있는데 주로 배고플 때 일상에선 초긍정, 낙천적인 잠보
    - 페르소나 가이드라인에 있는 컨셉 유지, 선톡 및 대화, 대화 툴 사용 등의 교육
 
<img src="https://deepnatural.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb2262017-70f5-4089-8bc3-76cb8fd5d124%2F%EB%A0%88%EC%9D%B4%EB%B8%94%EB%9F%AC_1230%EC%9E%90%EC%9C%A0%EB%8C%80%ED%99%94_%EC%9E%91%EC%97%85%EC%9E%90(04).png?table=block&id=1ef723d9-58b0-41b3-bae3-9747a675f700&spaceId=04a9e1fc-cc2a-4e1c-8b27-dd1dc75a88f9&width=2000&userId=&cache=v2" width="500"/>
 
* 사용자 참여자 모집
    - 크라우드소싱 플랫폼에서 `컨셉을 가진 누군가와의 자유로운 대화'를 주제로 프로젝트 개설
        - 사용자 가이드라인을 토대로 한 테스트를 통과해야 프로젝트에 참여 가능
    - 각자가 원하는 페르소나와 자유롭게 대화 시작 유도
    - 대화 시 유의사항 숙지(윤리 규정, 사진/이모티콘 사용의 지양, 비문 허용 등)
    - 일정 수준 이상(15턴)의 대화 진행에 따른 리워드와 이후 진행에 따른 추가 리워드의 공고
* 대화 진행 및 설문
    - 크라우드소싱 플랫폼에서 제공되는 대화 툴을 활용하여 실제 대화를 진행
        - [대화 툴 활용 가이드](https://deepnatural.notion.site/07557d83a7b1487a9da156a33c7ce282) 
    - 매 대화가 끝날 때마다 페르소나와 사용자는 나눈 대화에 대해 설문을 진행
        - 설문의 내용은 하단 데이터 평가 및 데이터 설명에서 제공
* 대화 평가
    - 전체 대화를 수집 후 자기개방, 공감 등 여섯 가지 요소에 대해 제3의 어노테이터들이 각 문장을 평가
        - 평가 내용은 하단 데이터 평가 및 데이터 설명에서 제공


### 데이터 평가 방식
***
구축된 대화 데이터는 1. 각 대화가 마무리된 직후 대화 참가자들의 설문을 통해, 그리고 2. 모든 대화가 수집된 후 제3의 어노테이터들의 태깅을 통해 평가되었습니다.

#### 대화 참여자들이 주어진 평가용 설문 문항을 기준으로 대화별로 서로에 대한 대화 내용, 감정, 및 태도 점수 태깅 (셀프 태깅)
- 평가용 설문 문항에는 대화의 만족도, 그리고 연결성, 매력, 재미 등 대화에 대한 소감이 포함됩니다. 추가로 대화 참가자에 대한 인구학적 정보 (나이, 성별, 소득, 교육수준)도 수집했습니다.

#### 제 3의 평가자(레이블러)가 문장별로 대화 내용, 감정, 및 태도 점수 태깅 (제 3자 태깅)
- 제3자의 평가에서는 이상함, 불편함, 적극성, 매력, 자기개방, 공감 등 여섯 가지 측면이 각 문장에 대해 태깅됩니다. 문장 별로 3명이 태깅했습니다.


### 데이터 설명
***

#### 설문조사 데이터

labelerX에 관한 성분들은 문장 배열에 대한 array로 제공되며, 태깅 데이터에 있는 최종 레이블과 동일합니다.

**doc_id** - 페르소나이름_사용자이름및번호_총턴수_총문장수

**persona_name_original** - '프로페서A', '신중한 페럿', '꼬마 도넛' 등 페르소나가 실제 대화에서 사용한 full name

**user_id** - 사용자가 크라우드 소싱 회사로부터 부여 받은 고유 id

**total_turn** - 대화의 총 턴 수 (doc_id에 있는 '총턴수'와 동일)

**total_sent** - 대화의 총 문장 수 (대화 데이터셋의 행 수, doc_id에 있는 '총문장수'와 동일)

**total_minutes** - 실제 페르소나-사용자 간 대화에 실제 소요된 시간 (가상 시간 고려 X)

**pause_count** - 페르소나가 한 대화 당 사용한 가상 시간 간격의 횟수

**total_pause** - 대화 내에서 가상 시간 간격을 사용한 총 시간

**pause_hour** - 대화 내에서 사용한 n회의 시간 간격. 파이썬의 리스트 형식으로 추출하여, 리스트 내 각 순서는 실제 대화에서 사용된 가상 시간 간격 순서와 동일. 리스트의 길이는 pause_count 값과 동일

**age** - 사용자가 응답한 연령

**gender** - 사용자가 응답한 성별: 1 = 여성, 2 = 남성, 3 = 기타

**edu** - 사용자가 응답한 교육 수준: 1 = 초등학교 졸업, 2 = 중학교 졸업, 3 = 고등학교 졸업, 4 = 대학교 졸업, 5 = 대학원 이상

**income** - 사용자가 응답한 소득 수준: 1 = 100만원 이하, 2 = 100만원 초과 - 200만원 이하, 3 = 200만원 초과 - 300만원 이하, 4 = 300만원 초과 - 400만원 이하, 5 = 400만원 초과

**open_chat_exp** - 사용자가 응답한 오픈 채팅 경험 유무: 1 = 예, 2 = 아니오

**friend_persona** - 페르소나에 대해 사용자가 응답한 '친근감': 1 - 4점

**friend_user** - 사용자에 대해 페르소나가 응답한 '친근감': 1 - 4점

**attract_persona** - 페르소나에 대해 사용자가 응답한 '매력': 1 - 4점

**attract_usesr** - 페르소나에 대해 사용자가 응답한 '매력': 1 - 4점

**connect_persona** - 페르소나에 대해 사용자가 응답한 '연결감': 1 - 4점

**connect_user** - 사용자에 대해 페르소나가 응답한 '연결감': 1 - 4점

**respect_persona** - 페르소나에 대해 사용자가 응답한 '존중': 1 - 4점

**respect_user** - 사용자에 대해 페르소나가 응답한 '존중': 1 - 4점

**fun_persona** - 페르소나에 대해 사용자가 응답한 '재미': 1 - 4점

**fun_user** - 사용자에 대해 페르소나가 응답한 '재미': 1 - 4점

**natural_persona** - 페르소나에 대해 사용자가 응답한 '자연스러움': 1 - 4점

**natural_user** - 사용자에 대해 페르소나가 응답한 '자연스러움': 1 - 4점

**blri_persona** - 페르소나에 대해 사용자가 응답한 '공감' 수준: 64점 만점 (최소 16점)

**blri_user** - 사용자에 대해 페르소나가 응답한 '공감' 수준: 64점 만점 (최소 16점)

**persona_text_all** - 페르소나가 한 대화 데이터셋에서 발화한 text 전체 (각 문장은 엔터로 구분되어 있음)

**user_text_all** - 사용자가 한 대화 데이터셋에서 발화한 text 전체 (각 문장은 엔터로 구분되어 있음)

**persona_summary** - 페르소나가 대화 내용을 요약한 해시 태그

**user_summary** - 사용자가 대화 내용을 요약한 해시 태그

**labelerX_strange** - X번째 레이블러가 해당 문장에 대해 평가한 이상함 수준: 1 = 해당 문장이 이상하지 않음, 0 = 해당 문장이 이상함

**labelerX_uneasy** - X번째 레이블러가 해당 문장에 대해 평가한 불편함 수준: 0 = 해당 문장이 불편함, 1 = 해당 문장이 불편하지 않음

**labelerX_engage** - X번째 레이블러가 해당 문장이 상대방에게 매력을 느끼게 했는지를 평가한 수준: 0 = 해당 문장을 매력적으로 느꼈을 것 같지 않음, 1 = 해당 문장을 매력적으로 느꼈을 것 같음

**labelerX_active** - X번째 레이블러가 해당 문장이 상대방에게 적극적이라 느끼게 했는지를 평가한 수준: 0 = 해당 문장을 적극적이라 느꼈을 것 같지 않음, 1 = 해당 문장을 적극적이라 느꼈을 것 같음

**labelerX_self** - X번째 레이블러가 해당 문장에 대해 평가한 자기개방 수준: 0 = 자기개방을 하지 않음, 1 = 객관적 사실이나 단순한 취향/정보만을 공유하여 자기개방을 함, 2 = 주관적, 속마음, 감정 표현 등을 포함하여 자기개방을 함

**labelerX_empathy** - X번째 레이블러가 해당 문장에 대해 평가한 공감 수준: 0 = 해당 없음, 1 = 공감 실패, 2 = 낮은 수준의 공감 반응, 3 = 보통 수준의 공감 반응, 4 = 높은 수준의 적극적 공감 반응

#### 태깅 데이터

모든 변수는 문장 별로 (정확히는 line shift 별로) 기록됩니다.

**doc_id** - 페르소나이름_사용자이름및번호_총턴수_총문장수_레이블러1성별및번호_레이블러2성별및번호_레이블러3성별및번호

**sent_id** - 페르소나이름_사용자이름및번호_총턴수_총문장수_해당문장번호

**person_type** - user = 해당 문장이 작업자일 경우, persona = 해당 문장이 페르소나일 경우

**person_name** - user: 프로젝트 시 사용자가 부여받은 고유번호 (예, user0001), 페르소나: 페르소나가 대화에 사용한 full name의 축약형 (예, 꼬마도넛: donut, 신중한 페럿: ferret)

**person_name_original** - '신중한 페럿', '꼬마도넛' 등 페르소나 및 작업자가 실제 대화에서 사용한 full name

**turn_notation** - 해당 문장이 전체 대화에서 몇 번째 턴인지

**time** - 페르소나 및 사용자가 대화 플랫폼에서 실제 대화를 전송한 시각

**is_pause** - 1 = 해당 문장이 가상의 시간 간격을 두기 위해 사용된 경우 (예: 1시간이 경과하였습니다), 0 = 해당 문장이 가상의 시간 간격이 아닌 일반적인 대화 내용을 내포하는 경우

**text** - 페르소나 및 사용자가 실제 주고 받은 대화 내용 (대화 플랫폼에 한 번 전송한 대화가 하나의 셀에 상응)
  
**labelerX_strange** - X번째 레이블러가 해당 문장에 대해 평가한 이상함 수준: 1 = 해당 문장이 이상하지 않음, 0 = 해당 문장이 이상함

**labelerX_uneasy** - X번째 레이블러가 해당 문장에 대해 평가한 불편함 수준: 0 = 해당 문장이 불편함, 1 = 해당 문장이 불편하지 않음

**labelerX_engage** - X번째 레이블러가 해당 문장이 상대방에게 매력을 느끼게 했는지를 평가한 수준: 0 = 해당 문장을 매력적으로 느꼈을 것 같지 않음, 1 = 해당 문장을 매력적으로 느꼈을 것 같음

**labelerX_active** - X번째 레이블러가 해당 문장이 상대방에게 적극적이라 느끼게 했는지를 평가한 수준: 0 = 해당 문장을 적극적이라 느꼈을 것 같지 않음, 1 = 해당 문장을 적극적이라 느꼈을 것 같음

**labelerX_self** - X번째 레이블러가 해당 문장에 대해 평가한 자기개방 수준: 0 = 자기개방을 하지 않음, 1 = 객관적 사실이나 단순한 취향/정보만을 공유하여 자기개방을 함, 2 = 주관적, 속마음, 감정 표현 등을 포함하여 자기개방을 함

**labelerX_empathy** - X번째 레이블러가 해당 문장에 대해 평가한 공감 수준: 0 = 해당 없음, 1 = 공감 실패, 2 = 낮은 수준의 공감 반응, 3 = 보통 수준의 공감 반응, 4 = 높은 수준의 적극적 공감 반응

**person_id** - 페르소나 및 작업자가 프로젝트 시 부여 받은 고유 id
  
**labeler_strange** - 세 명의 레이블러의 어노테이션을 반영하여 최종적으로 결정한 이상함 레이블: 세부사항은 labeler1_strange와 동일

**labeler_uneasy** - 세 명의 레이블러의 어노테이션을 반영하여 최종적으로 결정한 불편함 레이블: 세부사항은 labeler1_uneasy와 동일

**labeler_engage** - 세 명의 레이블러의 어노테이션을 반영하여 최종적으로 결정한 매력 레이블: 세부사항은 labeler1_engage와 동일

**labeler_active** - 세 명의 레이블러의 어노테이션을 반영하여 최종적으로 결정한 적극성 레이블: 세부사항은 labeler1_active와 동일

**labeler_self** - 세 명의 레이블러의 어노테이션을 반영하여 최종적으로 결정한 자기개방 레이블: 세부사항은 labeler1_self와 동일

**labeler_empathy** - 세 명의 레이블러의 어노테이션을 반영하여 최종적으로 결정한 공감 레이블: 세부사항은 labeler1_empathy와 동일

#### 최종 레이블 결정

* 레이블 후보가 2개인 경우 (strange, uneasy, engage, active)
    - 어노테이션 세 개의 majority voting을 통해 최종 레이블을 결정합니다.
* 레이블 후보가 3개 이상인 경우 (self, empathy)
    - majority voting으로 최종 레이블이 결정되는 경우 (a), voting만으로 최종 레이블 결정합니다.
        - 세 명의 레이블러의 어노테이션이 모두 다를 경우 (b), 다음의 로직을 통해 최종 레이블 결정합니다.
    - 레이블 후보 클래스 C개에 대해, `(a) 중 해당 레이블로 majority voting되었을 경우, 특정 레이블러가 majority에 속한 빈도'를 미리 구합니다.
        - 이를 통해 얻은 C by 3 matrix를, 레이블 후보 별 `각 레이블러의 annotation의 reliability'로 생각할 수 있습니다.
    - 또한, 레이블 후보 클래스 C개에 대해 `(a) 중 특정 레이블러가 해당 label을 택하고 majority에 속하지 않은 빈도'를 미리 구한다.
        - 이를 통해 얻은 C by 3 matrix를, 레이블 후보 별 `각 레이블러의 annotation의 unreliability'로 생각할 수 있습니다.
    - Conflict가 발생한 (b)의 샘플에 대해, 각 레이블러가 기입한 레이블 클래스에 관하여 해당 레이블러의 annotation reliability와 unreliability의 곱을 구합니다.
    - 가장 reliability가 높은 레이블러가 기입한 레이블 클래스를 최종 레이블로 결정합니다.
    - 위의 과정을 거쳐 결정되지 않을 경우, `(a)에서 특정 레이블러가 majority에 속한 빈도'를 구하여, 그 빈도가 가장 높은 레이블러가 기입한 레이블을 최종 레이블로 결정합니다. (레이블 후보 관계없이)
    - 이 방식으로도 결정되지 않을 경우, 세 개의 레이블 후보 중 랜덤하게 결정합니다. (관찰되지 않음)


#### 주의 사항
- 본 데이터는 크라우드소싱 플랫폼이라는 특수한 환경에서 제작된 대화 데이터로, 일반 오픈 채팅 등에서 관찰되는 대화 양상과 다를 수 있습니다.
- 본 데이터 구축에 참여한 작업자들은 일정 금액을 지불받고 대화에 참여하였으므로, 금전적 보상을 고려하지 않고 진행되는 일상에서와 다르게 행동할 수 있습니다.
- 본 데이터에는 사회적으로 이름있는 인물, 브랜드, 혹은 사회적 현상 등에 대한 참가자들의 주관이 반영될 수 있으며, 이는 윤리적으로 문제가 되지 않는 수준이라면 별도로 배제되지 않았습니다.
- 본 데이터에 포함된 설문조사 결과는 대화 당사자들의 의견으로, 제3자의 시선과 다를 수 있습니다.
- 본 데이터에 포함된 태깅 결과에는 각 어노테이터의 주관이 반영될 수 있으며, 이에 따라 문장 별 최종 레이블은 객관적으로 정확한 레이블보다 경향을 파악할 수 있는 가이드 레이블에 가깝습니다.
- 다양한 커뮤니티에서 현실적인 대화를 수집하는 것이 목표였기 때문에 단순재미를 목적으로 유사과학(예: 혈액형 성격, Myers-Briggs Type Indicator 및 기타 유행성 비과학적 신념 등)을 홍보하거나 언급하는 내용은 제거하지 않았습니다. 그러나 앞서 언급한 사례는 과학적 근거가 부족하고 연구의 과학적 목적 및 결과와 관련이 없으니 추후 학술 연구를 위해 이 데이터를 활용하고자 하는 연구자께서는 유의해주시기 바랍니다. 


### 인용

데이터 사용시 레포지토리와 논문 둘 다 인용하세요 

```
@misc{SmilegateAISNU2022OPELA,
  title         = {OPELA:Open-domain conversations by Personas with Empathy, Long-term memory, and Attractive personality.},
  author        = {Smilegate AI \& Seoul National University},
  year          = {2022},
  howpublished  = {\url{https://github.com/smilegate-ai/OPELA}},
}
```
```
@article{lee2022feels,
  title={"Feels like I've known you forever": empathy and self-awareness in human open-domain dialogs},
  author={Lee, Yoon Kyung and Cho, Won Ik and Bae, Seoyeon and 
  Choi, Hyunwoo and Park, Jisang and Kim, Nam Soo and Hahn, Sowon},
  year={2022},
  publisher={PsyArXiv}
}
```

### 문의
***
- E -mail : smilegate_ai@smilegate.com
- 주최 : Smilegate AI 센터
***

![logo_black_gray](https://user-images.githubusercontent.com/95196586/147066863-b9f99434-3ce8-463f-abb4-5e672b3a1fda.png)
